sudo: false

language: go
go:
  - 1.5.1

before_install:
  # This is needed so the package path uses elastic/winlogbeat as its path.
  - mkdir -p $HOME/gopath/src/github.com/elastic/winlogbeat
  - rsync -az ${TRAVIS_BUILD_DIR}/ $HOME/gopath/src/github.com/elastic/winlogbeat/
  - export TRAVIS_BUILD_DIR=$HOME/gopath/src/github.com/elastic/winlogbeat
  - cd $HOME/gopath/src/github.com/elastic/winlogbeat

install:
  - make install-deps

script:
  - make check
  - make build
  - make native
  - make coverage
